<?xml version="1.0" encoding="UTF-8"?>
<!--
    manpage, user manual, usage: VBoxManage dhcpserver

    Copyright (C) 2006-2015 Oracle Corporation

    This file is part of VirtualBox Open Source Edition (OSE), as
    available from http://www.virtualbox.org. This file is free software;
    you can redistribute it and/or modify it under the terms of the GNU
    General Public License (GPL) as published by the Free Software
    Foundation, in version 2 as it comes in the "COPYING" file of the
    VirtualBox OSE distribution. VirtualBox OSE is distributed in the
    hope that it will be useful, but WITHOUT ANY WARRANTY of any kind.
 -->
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<refentry id="vboxmanage-dhcpserver" lang="en">

  <refentryinfo>
    <pubdate>$Date$</pubdate>
    <title>VBoxManage dhcpserver</title>
  </refentryinfo>

  <refmeta>
    <refentrytitle>VBoxManage-dhcpserver</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>VBoxManage-dhcpserver</refname>
    <refpurpose>DHCP server management</refpurpose>
    <refclass>Oracle VM VirtualBox</refclass>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis id="synopsis-vboxmanage-dhcpserver-add">
      <command>VBoxManage dhcpserver add</command>
      <group choice="req">
        <arg choice="plain">--network=<replaceable>netname</replaceable></arg>
        <arg choice="plain">--interface=<replaceable>ifname</replaceable></arg>
      </group>
      <arg choice="req">--ip=<replaceable>dhcpd-address</replaceable></arg>
      <arg choice="req">--netmask=<replaceable>mask</replaceable></arg>
      <arg choice="req">--lower-ip=<replaceable>address</replaceable></arg>
      <arg choice="req">--upper-ip=<replaceable>address</replaceable></arg>
      <group choice="req">
        <arg choice="plain">--enable</arg>
        <arg choice="plain">--disable</arg>
      </group>
      <sbr/>
      <arg choice="opt" rep="repeat">
        <arg choice="opt">--global</arg>
        <arg choice="opt" rep="repeat">--add-opt=<replaceable>dhcp-opt-no hex-string</replaceable></arg>
      </arg>
      <sbr/>
      <arg choice="opt" rep="repeat">
        <arg choice="req">--vm=<replaceable>name|uuid</replaceable></arg>
        <arg choice="opt">--nic=<replaceable>1-N</replaceable></arg>
        <arg choice="opt" rep="repeat">--add-opt=<replaceable>dhcp-opt-no hex-string</replaceable></arg>
      </arg>
    </cmdsynopsis>
    <cmdsynopsis id="synopsis-vboxmanage-dhcpserver-modify">
      <command>VBoxManage dhcpserver modify</command>
      <group choice="req">
        <arg choice="plain">--network=<replaceable>netname</replaceable></arg>
        <arg choice="plain">--interface=<replaceable>ifname</replaceable></arg>
      </group>
      <arg choice="opt">--ip=<replaceable>dhcpd-address</replaceable></arg>
      <arg choice="opt">--netmask=<replaceable>mask</replaceable></arg>
      <arg choice="opt">--lower-ip=<replaceable>address</replaceable></arg>
      <arg choice="opt">--upper-ip=<replaceable>address</replaceable></arg>
      <group choice="opt">
        <arg choice="plain">--enable</arg>
        <arg choice="plain">--disable</arg>
      </group>
      <sbr/>
      <arg choice="opt" rep="repeat">
        <arg choice="opt">--global</arg>
        <arg choice="plain">--del-opt=<replaceable>dhcp-opt-no</replaceable></arg>
        <arg choice="plain">--add-opt=<replaceable>dhcp-opt-no hex-string</replaceable></arg>
      </arg>
      <sbr/>
      <arg choice="opt" rep="repeat">
        <arg choice="req">--vm=<replaceable>name|uuid</replaceable></arg>
        <arg choice="opt">--nic=<replaceable>1-N</replaceable></arg>
        <arg choice="opt" rep="repeat">--del-opt=<replaceable>dhcp-opt-no</replaceable></arg>
        <arg choice="opt" rep="repeat">--add-opt=<replaceable>dhcp-opt-no hex-string</replaceable></arg>
      </arg>
    </cmdsynopsis>
    <cmdsynopsis id="synopsis-vboxmanage-dhcpserver-remove">
      <command>VBoxManage dhcpserver remove</command>
      <group choice="req">
        <arg choice="plain">--network=<replaceable>netname</replaceable></arg>
        <arg choice="plain">--interface=<replaceable>ifname</replaceable></arg>
      </group>
    </cmdsynopsis>
    <cmdsynopsis id="synopsis-vboxmanage-dhcpserver-restart">
      <command>VBoxManage dhcpserver restart</command>
      <group choice="req">
        <arg choice="plain">--network=<replaceable>netname</replaceable></arg>
        <arg choice="plain">--interface=<replaceable>ifname</replaceable></arg>
      </group>
    </cmdsynopsis>
    <cmdsynopsis id="synopsis-vboxmanage-dhcpserver-findlease">
      <command>VBoxManage dhcpserver findlease</command>
      <group choice="req">
        <arg choice="plain">--network=<replaceable>netname</replaceable></arg>
        <arg choice="plain">--interface=<replaceable>ifname</replaceable></arg>
      </group>
      <arg choice="req">--mac-address=<replaceable>mac</replaceable></arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>Description</title>

    <para>
      The <command>dhcpserver</command> commands enable you to control the DHCP
       server that is built into VirtualBox.  You may find this useful when
       using internal or host-only networking.  Theoretically, you can also
       enable it for a bridged network, but that may cause conflicts with other
       DHCP servers in your physical network.
    </para>

    <refsect2 id="vboxmanage-dhcpserver-common-options">
      <title>Common options</title>
      <remark role="help-scope" condition="GLOBAL"/>
      <para>The subcommands of <command>dhcpserver</command> all operate on an
        internal network that can be identified via its name or in the host-only
        case via the host-only interface name:</para>
      <variablelist>
        <varlistentry>
          <term>--network=<replaceable>netname</replaceable></term>
          <listitem><para>The internal network name.  This is the same as you
            would use as value to the <command>VBoxManage modifyvm --intnet</command>
            option when configuring a VM for internal networking.  Or you see as
            VBoxNetworkName in the output from
            <command>VBoxManage list intnets</command>,
            <command>VBoxManage list natnets</command>, or
            <command>VBoxManage list hostonlyifs</command>.
          </para></listitem>
        </varlistentry>
        <varlistentry>
          <term>--interface=<replaceable>ifname</replaceable></term>
          <listitem><para>The host only interface name.  This would be same value
            as you would use for the <command>VBoxManage modifyvm --hostonlyadapter</command>
            option when configuring a VM to use a host-only network.  The value
            can also be found in the Name row in <command>VBoxManage list hostonlyifs</command>.
          </para></listitem>
        </varlistentry>
      </variablelist>
    </refsect2>

    <refsect2 id="vboxmanage-dhcpserver-add">
      <title>dhcpserver add</title>
      <remark role="help-copy-synopsis"/>
      <para>
        Adds a new DHCP server to a network or host-only interface.
      </para>
      <variablelist>
        <varlistentry>
          <term><option>--ip=<replaceable>dhcpd-address</replaceable></option></term>
          <listitem><para>The IP address the DHCP server should use.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--netmask=<replaceable>mask</replaceable></option></term>
          <listitem><para>The network mask.  Typically 255.255.255.0.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--lower-ip=<replaceable>address</replaceable></option>, <option>--upper-ip=<replaceable>address</replaceable></option></term>
          <listitem><para>The IP address range for the DHCP server to manage.  This
            should not include the address of the DHCP server itself, but it must be
            in the same network as it is.  The boundraries are inclusive, so both the
            lower and upper addresses will be handed out to clients.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--enable</option>, --disable</term>
          <listitem><para>Whether to enable the DHCP server or disable it.  If not specified,
            the server will be created in disabled state and no IP addresses handed out.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--global</option></term>
          <listitem><para>Set the option scope to global.  Any subsequent <option>--add-opt</option>
            options will be apply to all the DHCP clients.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--vm=<replaceable>vmname|uuid</replaceable></option></term>
          <listitem><para>Set the option scope to the first NIC of the specified VM.  Any
            subsequent <option>-add-opt</option> options will apply just to that interface,
            nothing else.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--nic=<replaceable>1-N</replaceable></option></term>
          <listitem><para>Set the option scope to a NIC other than first of the VM specified
            the in <option>--vm</option>.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><option>--add-opt=<replaceable>dhcp-opt-no hex-string</replaceable></option></term>
          <listitem><para>Adds the specified DHCP option number (0-255) and value.  The scope of
            the option is decided by the <option>--vm</option> and <option>global</option> options.
          </para></listitem>
        </varlistentry>
      </variablelist>
    </refsect2>

    <refsect2 id="vboxmanage-dhcpserver-modify">
      <title>dhcpserver modify</title>
      <remark role="help-copy-synopsis"/>
      <para>
        This modifies an existing DHCP server configuration.  It takes the same
        options as the <command>add</command> command with the addition of:
      </para>
      <variablelist>
        <varlistentry>
          <term><option>--del-opt=<replaceable>dhcp-opt-no</replaceable></option></term>
          <listitem><para>Counterpart to <option>--add-opt</option> that will cause the specified
            DHCP option number (0-255) to be deleted from the server settings.  Like with
            <option>--add-opt</option> the scope of the deletion is governed by the
            <option>--vm</option> and <option>global</option> options.
          </para></listitem>
        </varlistentry>
      </variablelist>
    </refsect2>

    <refsect2 id="vboxmanage-dhcpserver-remove">
      <title>dhcpserver remove</title>
      <remark role="help-copy-synopsis"/>
      <para>
        Removes the specified DHCP server.
      </para>
    </refsect2>

    <refsect2 id="vboxmanage-dhcpserver-restart">
      <title>dhcpserver restart</title>
      <remark role="help-copy-synopsis"/>
      <para>
        Restarts the specified DHCP server.  The DHCP server must be running.
      </para>
    </refsect2>

    <refsect2 id="vboxmanage-dhcpserver-findlease">
      <title>dhcpserver findlease</title>
      <remark role="help-copy-synopsis"/>
      <para>
        Performs a lease database lookup.  This is mainly for getting the IP
        address of a running VM.
      </para>
      <variablelist>
        <varlistentry>
          <term><option>--mac-address=<replaceable>mac</replaceable></option></term>
          <listitem><para>The MAC address to lookup in the lease database.</para></listitem>
        </varlistentry>
      </variablelist>
    </refsect2>

  </refsect1>

</refentry>

